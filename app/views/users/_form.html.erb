<%= form_for(@user) do |form| %>
    <%= render 'shared/error_messages', object: form.object %>

    <% if @is_edit %>
        <% @user_fields.each do |field| %>
            <div class="form-inline">
              <%= form.label field, class: 'user_edit_form_label text-right' %>
              <%= form.text_field field, class: 'form-control form_value', size: 40 %>
            </div>
        <% end %>
    <% else %>
        <div class="panel panel-success user_form_wrapper">
          <div class="panel-heading">Required</div>

          <div class="panel-body">
            <% @required_fields.each do |field| %>
                <div class="form-inline">
                  <%= form.label field, class: 'user_new_form_label text-right' %>
                  <% if field.to_s.include? 'password' %>
                      <%= form.password_field field, required: true, class: 'form-control form_value' %>
                  <% else %>
                      <%= form.text_field field, required: true, class: 'form-control form_value' %>
                  <% end %>

                </div>
            <% end %>
          </div>
        </div>

        <div class="panel panel-warning user_form_wrapper">
          <div class="panel-heading">Optional</div>

          <div class="panel-body">
            <% @optional_fields.each do |field| %>
                <div class="form-inline">
                  <%= form.label field, class: 'user_new_form_label text-right' %>
                  <%= form.text_field field, class: 'form-control form_value' %>
                </div>
            <% end %>
          </div>
        </div>

    <% end %>

    <%= link_to '(resend activation link)', new_account_activation_path, class: 'font_architects_daughter' %><br/>

    <%= form.submit yield(:button_text), class: 'btn btn-success form_submit' %>
<% end %>